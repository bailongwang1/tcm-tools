#TCM常用命令备忘录 (26-2)
*************************************************************************************************************
#tcm_takeownership 通过密码创建密码模块私钥

tcm_takeownership                      //输入 owner密码 和 srk密码，创建出私钥对

tcm_takeownership -y                 //输入 srk密码，创建出私钥对

tcm_takeownership -z                  //输入 owner密码，创建出私钥对

tcm_takeownership -yz                //创建出私钥对

注：tcm_takeownership  参数y代表owner密码为默认密码32个0，参数z代表srk密码为默认密码32个0
*************************************************************************************************************

*************************************************************************************************************
#tcm_changeownerauth 更换 owner密码 和 srk密码

tcm_changeownerauth -a             ///输入 owner密码，输入新密码，更换owner密码

tcm_changeownerauth -s             ///输入 owner密码，输入新秘密，更换srk密码
*************************************************************************************************************

*************************************************************************************************************
#tcm_clear 清除创建的密码模块私钥

tcm_clear                                    //输入 owner密码，清除私钥对

tcm_clear -f                                //清除私钥对

注：tcm_clear 参数f代表强制清除模式 ，参数z代表srk密码为默认密码32个0
*************************************************************************************************************

*************************************************************************************************************
#tcm_getpubek 获取密码模块根私钥对应的公钥

tcm_getpubek                             //输入 owner密码，查看公钥

注：tcm_getpubek 输入owner密码
*************************************************************************************************************

*************************************************************************************************************
#tcm_setenable 设置或者查看TCM状态，TCM有启用和禁用两种状态

tcm_setenable -s                       //输入 owner密码，查看TCM状态

tcm_setenable -e                      //输入 owner密码，启用TCM

tcm_setenable -d                      //输入 owner密码，禁用TCM
*************************************************************************************************************

*************************************************************************************************************
#tcm_setclearable 设置或者查看TCM CLEAR模式，TCM CLEAR有默认和强制两种模式

tcm_setclearable -s                   //输入 owner密码，查看

tcm_setclearable -o                   //输入 owner密码，禁用默认模式

tcm_setclearable -f                   //输入 owner密码，禁用强制模式
*************************************************************************************************************

*************************************************************************************************************
#tcm_setactive 设置或者查看TCM激活状态，TCM有激活和未激活两种状态

tcm_setactive -s                       //输入 owner密码，查看

tcm_setactive -a                       //输入 owner密码，激活

tcm_setactive -i                        //输入 owner密码，未激活
*************************************************************************************************************

*************************************************************************************************************
#tcm_setownable 设置或者查看TCM tcm_takeownership 激活状态，TCM tcm_takeownership有激活和未激活两种状态

tcm_setownable -s                    //输入 owner密码，查看 tcm_takeownership 状态

tcm_setownable -a                    //输入 owner密码，激活 tcm_takeownership

tcm_setownable -p                    //输入 owner密码，禁用 tcm_takeownership
*************************************************************************************************************

*************************************************************************************************************
#tcm_setpresence 设置或者查看 TCM 物理现场状态，TCM 物理现场有四种状态

tcm_setpresence -s                    //输入 owner密码，查看 TCM 物理现场状态

tcm_setpresence -c                    //输入 owner密码，清除 TCM 物理现场状态，必须在单用户模式下

注：tcm_setpresence 设置功能必须在单用户模式下才能执行成功
*************************************************************************************************************

*************************************************************************************************************
#tcm_setoperatorauth 设置TCM操作者的授权数据

tcm_setoperatorauth                  //输入新密码，设置TCM操作者的授权数据
*************************************************************************************************************

*************************************************************************************************************
#tcm_restrictsrk 设置TCM SRK 的授权数据

tcm_restrictsrk -s                       //输入 owner密码，查看TCM SRK 的授权数据

tcm_restrictsrk -a                       //输入 owner密码，设置TCM SRK 的授权数据 从所有者获得

tcm_restrictsrk -r                       //输入 owner密码，设置TCM SRK 的授权数据 从自身获得
*************************************************************************************************************

*************************************************************************************************************
#tcm_restrictpubek 设置TCM 密码模块公钥 读 的状态

tcm_restrictpubek -s                  //输入 owner密码，查看TCM 密码模块公钥 读 的状态

tcm_restrictpubek -r                  //输入 owner密码，设置TCM 密码模块公钥 不可以读
*************************************************************************************************************

*************************************************************************************************************
#tcm_resetdalock 重置TCM锁定时间

tcm_resetdalock                        //输入 owner密码，重置TCM锁定时间
*************************************************************************************************************

*************************************************************************************************************
#tcm_version 查看TCM版本情况

tcm_version                                           //查看TCM版本情况
*************************************************************************************************************

*************************************************************************************************************
#tcm_selftest 自检测

tcm_selftest                                          //自检测
*************************************************************************************************************

*************************************************************************************************************
#tcm_sealdata 加密

tcm_sealdata  -i  infile -p 1  -o  outfile            //加密文件infile输出outfile
*************************************************************************************************************

*************************************************************************************************************
#tcm_unsealdata 解密

tcm_unsealdata -i infile -o outfile                  //解密文件infile输出outfile
*************************************************************************************************************

*************************************************************************************************************
#tcm_sm4 加密

tcm_sm4  -i  infile  -o  outfile  -e                 //加密文件infile输出outfile
*************************************************************************************************************

*************************************************************************************************************
#tcm_sm4 解密

tcm_sm4 -i infile -o outfile -d                     //解密文件infile输出outfile
*************************************************************************************************************

*************************************************************************************************************
#tcm_sm3 hash

tcm_sm3 -i infile                                   //hash infile
*************************************************************************************************************

*************************************************************************************************************
#tcm_nvdefine 定义nv

tcm_nvdefine -i 0x01 -p OWNERWRITE -s 30           //定位0x01位置大小30B NV空间，权限OWNERWRITE (没有执行过takeowner)
*************************************************************************************************************

*************************************************************************************************************
#tcm_nvwrite 写NV

tcm_nvwrite -i 0x01  -d testdata                   //写0x01位置，内容为testdata
*************************************************************************************************************

*************************************************************************************************************
#tcm_nvread 读NV

tcm_nvread -i 0x01                                //读0x01位置
*************************************************************************************************************

*************************************************************************************************************
#tcm_nvrelease 删除NV

tcm_nvrelease -i 0x01                             //删除0x01位置
*************************************************************************************************************

*************************************************************************************************************
#tcm_createek ?

tcm_createek                                      //?
*************************************************************************************************************

*************************************************************************************************************
#tcm_revokeek ?

tcm_revokeek                                      //?
*************************************************************************************************************
